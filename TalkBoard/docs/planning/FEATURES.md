# 💡 핵심 기능 명세서

## 📋 기능 목록

### 1. 추모관 관리

#### 1.1 추모관 생성
- **기능**: 고인을 위한 추모관 생성
- **입력 항목**:
  - 추모 대상 타입 (필수): '사람' 또는 '애완동물' 선택
  - 고인 이름 (필수)
  - 생애 요약 (선택)
  - 사진 (최대 5장)
  - 동영상 (YouTube 링크 또는 업로드)
  - 편지 (텍스트 또는 음성)
  - 기념일 (생일, 기일)
  - 공개/비공개 설정
- **타입별 차이점**:
  - **사람 추모관**: 전통적인 추모 분위기, "고인", "기일" 표현 사용
  - **애완동물 추모관**: 따뜻하고 밝은 분위기, "반려동물", "떠난 날" 표현 사용
- **출력**: 추모관 ID, 생성 일시

#### 1.2 추모관 수정
- **기능**: 생성한 추모관 정보 수정
- **권한**: 추모관 생성자만 수정 가능
- **수정 가능 항목**: 모든 입력 항목

#### 1.3 추모관 삭제
- **기능**: 추모관 삭제 (소프트 삭제)
- **권한**: 추모관 생성자만 삭제 가능
- **복원**: 삭제된 추모관 복원 기능

#### 1.4 추모관 목록 조회
- **기능**: 내가 만든 추모관 리스트 조회
- **필터**: 
  - 추모 대상 타입 (사람/애완동물/전체)
  - 공개/비공개
  - 최신순/이름순
- **검색**: 고인 이름으로 검색

### 2. 콘텐츠 관리

#### 2.1 사진 업로드
- **기능**: 추모관에 사진 추가
- **제한**: 최대 5장
- **형식**: JPG, PNG
- **크기 제한**: 10MB 이하

#### 2.2 동영상 관리
- **기능**: YouTube 링크 또는 직접 업로드
- **형식**: MP4, YouTube 링크
- **크기 제한**: 100MB 이하 (업로드 시)

#### 2.3 편지 작성
- **기능**: 텍스트 또는 음성으로 편지 작성
- **텍스트 편지**: 마크다운 지원
- **음성 편지**: 녹음 및 재생 기능
- **홈 화면 공개 설정**: 편지 작성 시 홈 화면 공개 여부 선택
  - **공개**: 홈 화면 "가슴을 울리는 추모글"에 표시 가능
  - **비공개**: 추모관 내에서만 조회 가능
  - **기본값**: 비공개

### 3. 추모 활동

#### 3.1 방문 기록
- **기능**: 추모관 방문 시 자동 카운트
- **표시**: "이 추모관은 N명이 방문했습니다"
- **중복 방문**: 하루 1회만 카운트

#### 3.2 댓글 작성
- **기능**: 추모관에 위로 메시지 작성
- **형식**: 텍스트
- **수정/삭제**: 작성자만 가능

#### 3.3 기도 요청
- **기능**: 기도 요청 글 작성 및 함께 기도 참여
- **기도 카운트**: 함께 기도 버튼 클릭 시 카운트 증가
- **응답 댓글**: 기도 응답 메시지 작성

#### 3.4 감정 공유 게시판
- **기능**: 감정 나눔 글 작성
- **CRUD**: 글 작성, 조회, 수정, 삭제
- **좋아요**: 하트 아이콘으로 좋아요 표시
- **댓글**: 댓글 작성 및 조회

#### 3.5 영원한 시간 (Eternal Time)
- **기능**: 고인이 돌아가신 날부터 새로운 삶의 시간을 시각화
- **의미**: 
  - 죽음은 끝이 아니라 새로운 삶의 시작
  - 고인이 돌아가신 순간부터 새로운 시간이 흐르기 시작
  - 죽음으로 인해 다시 태어난 것처럼 새로운 삶의 시간을 가지게 됨
  - 이는 위로와 희망을 주는 의미
- **표시 방식**:
  - 고인이 돌아가신 날부터 경과된 시간을 실시간으로 표시
  - "새로운 삶의 시간: N년 N개월 N일 N시간 N분"
  - 시계나 타이머처럼 시간이 흐르는 것을 시각적으로 표현
  - 부드럽고 따뜻한 애니메이션 효과
- **위치**: 추모관 상세 화면 상단 또는 별도 섹션
- **디자인**: 
  - 따뜻한 톤의 색상 (베이지, 크림)
  - 부드러운 시계 아이콘 또는 시간 흐름 애니메이션
  - "영원한 시간이 흐르고 있습니다" 같은 위로의 메시지
- **심리적 효과**:
  - 죽음 이후에도 시간이 흐른다는 것을 보여줌으로써 위로 제공
  - 고인이 새로운 삶을 살고 있다는 희망적 메시지
  - 시간이 지나도 기억은 영원하다는 의미 전달

### 4. 추모금 시스템

#### 4.1 추모금 전달
- **기능**: 추모금 결제 및 전달
- **결제 방식**: 카드, 계좌이체, 간편결제
- **수수료**: 전달 금액의 5% 차감
- **유지비**: ₩1,900 차감
- **안내**: 수수료 및 유지비 차감 안내 메시지 표시

#### 4.2 추모금 수령
- **기능**: 수령자 현금화 가능
- **출금**: 계좌로 출금 가능
- **내역**: 추모금 수령 내역 조회

### 5. 알림 시스템

#### 5.1 기념일 알림
- **기능**: 고인의 생일/기일에 푸시 알림
- **알림 내용**: 고인 이름, 날짜, "추모하러 가기" 링크
- **발송 시점**: 
  - 생일/기일 전날 오후 6시
  - 생일/기일 당일 오전 9시
  - 기념일 1주일 전 (선택)
- **대상**: 추모관 생성자 및 추모관을 좋아요한 사용자
- **설정**: 알림 수신 여부 설정 가능

#### 5.2 홈 화면 공개 제안 알림
- **기능**: 공감을 많이 받은 추모글에 대해 작성자에게 홈 화면 공개 제안
- **조건**: 
  - 좋아요 + 댓글 수 합계가 일정 기준 이상 (예: 10개 이상)
  - 편지가 비공개 상태일 때
  - 작성자가 홈 화면 공개를 아직 선택하지 않은 경우
- **알림 내용**: 
  - "당신의 추모글이 많은 공감을 받았습니다"
  - "홈 화면에 공개하여 더 많은 사람들과 나누시겠어요?"
  - 편지 내용 일부 미리보기
- **동작**:
  - 알림 클릭 시 공개 동의 화면으로 이동
  - "공개하기" / "나중에" 선택 가능
  - 공개 선택 시 홈 화면 "가슴을 울리는 추모글"에 자동 추가
  - 비공개 선택 시 알림은 닫히지만 나중에 다시 제안 가능

#### 5.3 댓글 알림
- **기능**: 추모관에 댓글이 달렸을 때 알림
- **알림 내용**: 댓글 작성자, 댓글 내용 일부, "댓글 보러 가기" 링크
- **발송 시점**: 댓글 작성 직후
- **대상**: 추모관 생성자
- **제한**: 같은 추모관에 1시간 내 여러 댓글이 달리면 묶어서 발송

#### 5.4 추모금 전달 알림
- **기능**: 추모관에 추모금이 전달되었을 때 알림
- **알림 내용**: 기부자 이름, 추모금 금액, "추모금 내역 보기" 링크
- **발송 시점**: 추모금 전달 직후
- **대상**: 추모관 생성자 (수령자)

#### 5.5 재활성화 알림
- **기능**: 유령 회원을 재활성화하기 위한 알림
- **발송 시점**: 
  - 마지막 접속 후 7일, 14일, 30일, 90일
  - 기념일 3일 전 (유령 회원)
  - 추모관에 새로운 활동이 있을 때 (유령 회원)
- **알림 내용**: 
  - "[고인 이름]님의 영원한 시간이 계속 흐르고 있습니다."
  - "새로운 삶의 시간: [N]년 [N]개월 [N]일"
  - "추모관 보러 가기" 버튼
- **대상**: 장기 미접속 사용자 (7일 이상)
- **제한**: 주 1회

#### 5.6 영원한 시간 알림
- **기능**: 돌아가신 분을 기억하고 추모하는 알림
- **발송 시점**: 
  - 매주 일요일 오전 9시 (주간)
  - 매월 1일 오전 9시 (월간)
  - 특별한 날 (1주년, 1개월, 100일, 1년, 2년, 5년 등)
- **알림 내용**: 
  - "[고인 이름]님의 새로운 삶의 시간이 계속 흐르고 있습니다."
  - "새로운 삶의 시간: [N]년 [N]개월 [N]일"
  - "[고인 이름]님을 기억하며 함께 추모합니다."
  - "추모관 보러 가기" 버튼
- **대상**: 추모관 생성자 및 추모관을 좋아요한 사용자
- **설정**: 알림 수신 여부 설정 가능

#### 5.7 기도 요청 알림
- **기능**: 새로운 기도 요청이 등록되었을 때 알림
- **알림 내용**: 작성자 이름, 기도 요청 제목, "함께 기도하기" 버튼
- **발송 시점**: 기도 요청 등록 직후
- **대상**: 모든 사용자 (알림 설정 ON인 경우)
- **제한**: 하루 최대 3개까지

#### 5.8 프리미엄 구독 만료 알림
- **기능**: 프리미엄 구독 만료 전 알림
- **알림 내용**: 만료 일정, "구독 갱신하기" 버튼
- **발송 시점**: 만료 3일 전, 만료일 당일
- **대상**: 프리미엄 구독자

#### 5.9 알림 설정
- **알림 종류별 ON/OFF**: 기념일, 댓글, 기도, 재활성화, 영원한 시간 등
- **알림 수신 시간**: 기본 09:00 ~ 22:00 (기념일 제외)
- **알림 빈도 제한**: 같은 추모관 하루 최대 3개, 같은 사용자 하루 최대 5개

### 6. 프리미엄 기능

#### 6.1 프리미엄 추모관
- **기능**: 월 ₩1,900 또는 연 ₩19,000 구독
- **혜택**:
  - 무제한 사진 업로드
  - 동영상 직접 업로드 (크기 제한 없음)
  - 음성 편지 무제한
  - 광고 제거
  - 커스텀 배경

#### 6.2 디지털 헌화 아이템
- **기능**: 꽃, 배경, 음악 등 유료 아이템 구매
- **가격**: 아이템별 상이
- **적용**: 추모관에 장식으로 사용

### 7. 검색 및 추천

#### 7.1 추모관 검색
- **기능**: 공개된 추모관 검색
- **검색 조건**: 고인 이름, 생성자 이름
- **필터**: 
  - 추모 대상 타입 (사람/애완동물/전체)
  - 최신순, 공감순

#### 7.2 추천 추모글
- **기능**: 홈 화면에 추천 추모글 표시
- **기준**: 최근 등록, 공감을 많이 받은 추모관
- **표시 개수**: 3개
- **타입별 구분**: 사람/애완동물 탭 또는 필터로 구분 표시

#### 7.3 가슴을 울리는 추모글
- **기능**: 홈 화면에 감동적인 추모글 표시
- **선정 기준**:
  - 작성자가 홈 화면 공개에 동의한 편지
  - 좋아요 + 댓글 수가 많은 편지
  - 최근 작성된 감동적인 편지
- **표시 내용**:
  - 고인 이름
  - 편지 내용 일부 (4줄 미리보기)
  - 작성자 정보
  - 작성 시간
  - "전체 보기" 버튼
  - 공유 버튼
- **권한**: 작성자가 공개 동의한 경우에만 표시
- **타입별 구분**: 
  - 사람/애완동물 탭 또는 필터로 구분
  - 각 타입에 맞는 아이콘 표시 (사람: 하트, 애완동물: 발자국/고양이/강아지 아이콘)

### 8. 추모관 공유
- **기능**: 추모관을 다른 사람들과 공유
- **공유 방식**:
  - 추모관 링크 생성
  - SNS 공유 (카카오톡, 페이스북, 트위터 등)
  - QR 코드 생성
- **공유 통계**: 공유 횟수, 공유를 통해 방문한 사람 수
- **권한**: 공개 추모관만 공유 가능

### 9. 추모관 통계
- **기능**: 추모관의 활동 통계를 시각화
- **통계 항목**:
  - 방문 수 그래프 (일별/월별)
  - 댓글 수 통계
  - 추모금 통계
  - 공감 수 통계
  - 공유 횟수 통계
- **표시 위치**: 추모관 상세 화면 또는 별도 통계 화면

### 10. 추모관 백업/내보내기
- **기능**: 추모관 데이터를 백업하거나 다른 형식으로 내보내기
- **내보내기 형식**:
  - 추모관 데이터 PDF 내보내기
  - 사진/영상 다운로드
  - 편지 텍스트 내보내기
  - 전체 데이터 백업 (JSON 형식)
- **권한**: 추모관 생성자만 가능

## 🔐 권한 관리

### 사용자 권한
- **일반 사용자**: 추모관 생성, 댓글 작성, 기도 참여
- **추모관 생성자**: 추모관 수정/삭제, 추모금 수령, 추모관 백업/내보내기
- **프리미엄 사용자**: 프리미엄 기능 사용

### 추모관 권한
- **공개**: 모든 사용자가 조회 가능, 공유 가능
- **비공개**: 생성자만 조회 가능, 공유 불가

