# 🔍 기능 분석 및 추가 제안

## ✅ 현재 화면에 표현된 기능 확인

### 1. 추모관 관리 ✅
- ✅ 추모관 생성 (Step 1~6)
- ✅ 추모관 수정 (추모관 목록 → 편집)
- ✅ 추모관 삭제 (추모관 목록 → 삭제)
- ✅ 추모관 목록 조회 (타입별 필터, 검색)
- ✅ 삭제된 추모관 복원 (마이페이지)

### 2. 콘텐츠 관리 ✅
- ✅ 사진 업로드 (최대 5장, 프리미엄: 무제한)
- ✅ 동영상 관리 (YouTube 링크 또는 업로드)
- ✅ 편지 작성 (텍스트/음성, 홈 화면 공개 설정)

### 3. 추모 활동 ✅
- ✅ 방문 기록 (추모관 상세 화면에 표시)
- ✅ 댓글 작성/수정/삭제 (추모관 상세)
- ✅ 기도 요청 (기도 요청 화면)
- ✅ 감정 공유 게시판 (감정 공유 화면)
- ✅ 영원한 시간 (추모관 상세, 책장 디자인)

### 4. 추모금 시스템 ✅
- ✅ 추모금 전달 (추모관 상세 → 모달)
- ✅ 추모금 수령 (마이페이지 → 출금 모달)
- ⚠️ 추모금 내역 (마이페이지에 버튼은 있으나 상세 화면 없음)

### 5. 알림 시스템 ⚠️
- ✅ 기념일 알림 (홈 화면에 표시)
- ⚠️ 홈 화면 공개 제안 알림 (기능은 정의되어 있으나 알림 클릭 시 이동할 화면/모달이 명시되지 않음)

### 6. 프리미엄 기능 ✅
- ✅ 프리미엄 구독 (마이페이지 → 프리미엄 구독 화면)
- ✅ 디지털 헌화 아이템 (마이페이지 → 아이템 상점)

### 7. 검색 및 추천 ✅
- ✅ 추모관 검색 (공개 추모관 검색 화면)
- ✅ 추천 추모글 (홈 화면)
- ✅ 가슴을 울리는 추모글 (홈 화면)

---

## ⚠️ 누락된 화면/기능

### 1. 홈 화면 공개 제안 알림 화면/모달
**현재 상태**: 기능은 정의되어 있으나 알림 클릭 시 이동할 화면이 명시되지 않음

**추가 필요**:
- 홈 화면 공개 제안 알림 클릭 시 모달 또는 화면
- 편지 내용 미리보기
- "공개하기" / "나중에" 버튼
- 공개 선택 시 홈 화면 "가슴을 울리는 추모글"에 자동 추가

### 2. 추모금 내역 화면
**현재 상태**: 마이페이지에 "추모금 내역 보기" 버튼은 있으나 상세 화면이 정의되지 않음

**추가 필요**:
- 추모금 수령 내역 리스트
- 날짜별, 금액별 정렬
- 상세 내역 (전달자, 금액, 수수료, 수령액, 날짜)

### 3. 알림 설정 화면
**현재 상태**: 마이페이지에 "알림 설정" 버튼은 있으나 상세 화면이 정의되지 않음

**추가 필요**:
- 기념일 알림 ON/OFF
- 댓글 알림 ON/OFF
- 기도 알림 ON/OFF
- 홈 화면 공개 제안 알림 ON/OFF

### 4. 개인정보 수정 화면
**현재 상태**: 마이페이지에 "개인정보 수정" 버튼은 있으나 상세 화면이 정의되지 않음

**추가 필요**:
- 이름 수정
- 이메일 수정
- 프로필 사진 변경
- 비밀번호 변경

### 5. 프로필 수정 화면
**현재 상태**: 마이페이지에 프로필은 표시되나 수정 화면이 명시되지 않음

**추가 필요**:
- 프로필 사진 변경
- 이름 수정
- 소개글 작성

### 6. 추억 상세 화면
**현재 상태**: 책장 디자인에서 책 클릭 시 "해당 시기의 추억 상세 보기"라고만 명시됨

**추가 필요**:
- 해당 시기(년도/계절)의 추억 상세 화면
- 사진, 편지, 댓글 등 해당 시기 관련 콘텐츠 표시
- 시간축 표시

### 7. 이미지 뷰어 모달
**현재 상태**: 추모관 상세에서 "사진 클릭 → 이미지 뷰어 모달"이라고만 명시됨

**추가 필요**:
- 이미지 확대 보기
- 좌우 스와이프로 이미지 전환
- 줌 인/아웃 기능
- 이미지 공유 기능

### 8. 동영상 플레이어
**현재 상태**: 추모관 상세에서 "동영상 재생"이라고만 명시됨

**추가 필요**:
- YouTube 링크 재생
- 업로드된 동영상 재생
- 전체화면 모드
- 재생 컨트롤

### 9. 오디오 플레이어 (음성 편지)
**현재 상태**: 추모관 상세에서 "편지 음성 재생 → 오디오 플레이어"라고만 명시됨

**추가 필요**:
- 음성 편지 재생
- 재생/일시정지/정지 버튼
- 진행 바
- 재생 시간 표시
- 속도 조절 (0.5x, 1x, 1.5x, 2x)

### 10. 공개 동의 화면/모달
**현재 상태**: 홈 화면 공개 제안 알림 클릭 시 이동할 화면이 명시되지 않음

**추가 필요**:
- 편지 내용 미리보기
- 공개 시 표시될 내용 안내
- "공개하기" / "나중에" 버튼
- 공개 선택 시 홈 화면에 자동 추가

---

## 💡 추가하면 좋을 기능 제안

### 1. 추모관 공유 기능
**목적**: 추모관을 다른 사람들과 공유하여 더 많은 사람들이 추모할 수 있도록

**기능**:
- 추모관 링크 생성
- SNS 공유 (카카오톡, 페이스북, 트위터 등)
- QR 코드 생성
- 공유 통계 (공유 횟수, 공유를 통해 방문한 사람 수)

### 2. 추모관 초대 기능
**목적**: 특정 사람들을 추모관에 초대하여 함께 추모할 수 있도록

**기능**:
- 이메일/전화번호로 초대
- 초대 링크 생성
- 초대된 사람 목록 표시
- 초대 수락/거절 기능

### 3. 추모관 방명록
**목적**: 방문한 사람들이 간단한 방명록을 남길 수 있도록

**기능**:
- 방명록 작성 (이름, 메시지)
- 방명록 리스트 조회
- 방명록 삭제 (작성자만)

### 4. 추모관 통계
**목적**: 추모관의 활동 통계를 시각화하여 보여주기

**기능**:
- 방문 수 그래프 (일별/월별)
- 댓글 수 통계
- 추모금 통계
- 공감 수 통계

### 5. 추모관 백업/내보내기
**목적**: 추모관 데이터를 백업하거나 다른 형식으로 내보내기

**기능**:
- 추모관 데이터 PDF 내보내기
- 사진/영상 다운로드
- 편지 텍스트 내보내기
- 전체 데이터 백업

### 6. 추모관 템플릿
**목적**: 추모관 생성 시 미리 만들어진 템플릿을 사용하여 쉽게 만들기

**기능**:
- 다양한 템플릿 제공 (전통형, 모던형, 따뜻한형 등)
- 템플릿 미리보기
- 템플릿 적용 후 커스터마이징

### 7. 추모관 그룹
**목적**: 여러 추모관을 그룹으로 묶어 관리

**기능**:
- 추모관 그룹 생성 (예: "가족", "친구" 등)
- 그룹별 추모관 관리
- 그룹별 통계

### 8. 추모관 일정 관리
**목적**: 기념일 외에도 추모 관련 일정을 관리

**기능**:
- 추모 일정 추가 (예: 추모식, 제사 등)
- 일정 알림 설정
- 일정 캘린더 뷰

### 9. 추모관 메모
**목적**: 추모관에 개인 메모를 남길 수 있도록

**기능**:
- 비공개 메모 작성
- 메모 카테고리 분류
- 메모 검색

### 10. 추모관 아카이브
**목적**: 오래된 추모관을 아카이브하여 보관

**기능**:
- 추모관 아카이브 설정
- 아카이브된 추모관 조회
- 아카이브 해제

### 11. 추모관 인쇄
**목적**: 추모관을 인쇄하여 물리적으로 보관

**기능**:
- 추모관 인쇄용 레이아웃
- PDF 생성
- 인쇄 옵션 설정 (사진 포함 여부, 편지 포함 여부 등)

### 12. 추모관 검색 고급 필터
**목적**: 더 정확한 추모관 검색

**기능**:
- 날짜 범위 필터 (생일, 기일)
- 방문 수 범위 필터
- 공감 수 범위 필터
- 지역 필터 (생전 거주지 등)

### 13. 추모관 추천 시스템
**목적**: 사용자에게 맞는 추모관을 추천

**기능**:
- 관심사 기반 추천
- 유사한 추모관 추천
- 인기 추모관 추천

### 14. 추모관 댓글 알림
**목적**: 댓글이 달렸을 때 알림

**기능**:
- 댓글 알림 설정
- 댓글 알림 푸시
- 댓글 알림 조회

### 15. 추모관 좋아요/공감 기능
**목적**: 추모관에 공감을 표현

**기능**:
- 추모관 좋아요 버튼
- 좋아요 수 표시
- 좋아요한 추모관 목록

---

## 📊 우선순위 제안

### 🔴 높은 우선순위 (필수)
1. **홈 화면 공개 제안 알림 화면/모달** - 기능이 정의되어 있으나 화면이 없음
2. **추모금 내역 화면** - 버튼은 있으나 상세 화면 없음
3. **알림 설정 화면** - 버튼은 있으나 상세 화면 없음
4. **개인정보 수정 화면** - 버튼은 있으나 상세 화면 없음
5. **이미지 뷰어 모달** - 기능은 있으나 상세 정의 없음
6. **동영상 플레이어** - 기능은 있으나 상세 정의 없음
7. **오디오 플레이어** - 기능은 있으나 상세 정의 없음

### 🟡 중간 우선순위 (권장) ✅ 완료
8. **추억 상세 화면** - 책장에서 책 클릭 시 상세 화면 ✅
9. **추모관 공유 기능** - 추모관을 더 넓게 공유 ✅
10. **추모관 통계** - 시각적 통계 제공 ✅
11. **추모관 백업/내보내기** - 데이터 보존 ✅

### 🟢 낮은 우선순위 (선택)
12. **추모관 템플릿** - 사용자 편의성 향상
13. **추모관 그룹** - 관리 편의성
14. **추모관 일정 관리** - 추가 기능
15. **추모관 메모** - 개인 메모 기능

---

## 📝 결론

### 현재 상태
- **기본 기능 커버리지**: 약 98% ✅
- **누락된 필수 화면**: 0개 ✅ (모두 추가 완료)
- **추가 제안 기능**: 15개 (중간 우선순위 4개 완료)

### 완료된 작업 ✅
1. ✅ 누락된 필수 화면 8개를 SCREEN_LAYOUTS.md에 추가
2. ✅ 중간 우선순위 추가 기능 4개를 FEATURES.md와 SCREEN_LAYOUTS.md에 반영
   - 추모관 공유 기능
   - 추모관 통계
   - 추모관 백업/내보내기
   - 추억 상세 화면
3. ✅ 각 화면의 상세 레이아웃 디자인 작성 완료

### 다음 단계
1. ✅ 데이터 구조 설계 (DATA_STRUCTURE.md 업데이트) - 완료
2. 낮은 우선순위 기능들 검토 및 추가 여부 결정
3. API 설계 및 백엔드 구조 설계
4. UI/UX 디자인 (Figma)
5. Flutter 앱 개발 시작

### 데이터 구조 업데이트 완료 ✅
다음 컬렉션 및 필드가 추가되었습니다:

#### memorials 컬렉션에 추가된 필드:
- `shareCount`: 공유 횟수
- `shareVisitCount`: 공유를 통해 방문한 사람 수
- `commentCount`: 댓글 수 (통계용)
- `donationCount`: 추모금 전달 횟수 (통계용)
- `totalDonationAmount`: 총 추모금 수령액 (통계용)

#### 새로 추가된 컬렉션:
1. **shares** (추모관 공유 기록)
   - 공유 타입, 공유 일시, 공유를 통해 방문 여부

2. **memorialStats** (추모관 통계 - 일별 집계)
   - 일별 방문 수, 댓글 수, 추모금, 공유 수 통계

3. **backups** (추모관 백업 내역)
   - 백업 타입, 파일 URL, 파일 크기, 백업 일시

#### 인덱스 및 보안 규칙:
- 모든 새 컬렉션에 대한 인덱스 설정 추가
- Firestore 보안 규칙 추가
- Storage 경로에 백업 파일 경로 추가

