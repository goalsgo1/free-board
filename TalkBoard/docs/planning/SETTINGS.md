# ⚙️ 설정 화면 기획서

## 📋 개요

사용자가 앱의 다양한 설정을 관리할 수 있는 통합 설정 화면입니다. 마이페이지에서 "설정" 버튼을 통해 접근합니다.

## 🎯 설정 화면 구성

### 진입 경로
- **마이페이지** → "⚙️ 설정" 버튼 클릭
- **추모관 상세 화면** → 설정 버튼 → "알림 설정" (추모관별 알림 설정)

---

## 📱 설정 화면 레이아웃

```
┌─────────────────────────────────────────┐
│  [←]  설정                              │ ← AppBar
├─────────────────────────────────────────┤
│                                         │
│  👤 계정 설정                            │
│  ┌─────────────────────────────────┐   │
│  │  [개인정보 수정]        [>]     │   │
│  │  [비밀번호 변경]        [>]     │   │
│  │  [회원 탈퇴]            [>]     │   │
│  └─────────────────────────────────┘   │
│                                         │
│  🔔 알림 설정                            │
│  ┌─────────────────────────────────┐   │
│  │  [알림 설정]             [>]     │   │
│  │  [알림 수신 시간]         [>]     │   │
│  └─────────────────────────────────┘   │
│                                         │
│  🔒 프라이버시 설정                      │
│  ┌─────────────────────────────────┐   │
│  │  [프로필 공개 설정]       [>]     │   │
│  │  [추모관 기본 공개 설정]   [>]     │   │
│  │  [검색 허용 설정]          [>]     │   │
│  └─────────────────────────────────┘   │
│                                         │
│  💾 데이터 관리                          │
│  ┌─────────────────────────────────┐   │
│  │  [캐시 삭제]              [>]     │   │
│  │  [백업/동기화]            [>]     │   │
│  │  [데이터 내보내기]        [>]     │   │
│  └─────────────────────────────────┘   │
│                                         │
│  🎨 앱 설정                              │
│  ┌─────────────────────────────────┐   │
│  │  [언어 설정]              [>]     │   │
│  │  [폰트 크기]              [>]     │   │
│  │  [앱 테마]                [>]     │   │
│  └─────────────────────────────────┘   │
│                                         │
│  💳 결제 및 구독                         │
│  ┌─────────────────────────────────┐   │
│  │  [프리미엄 구독 관리]      [>]     │   │
│  │  [결제 내역]              [>]     │   │
│  │  [아이템 구매 내역]        [>]     │   │
│  └─────────────────────────────────┘   │
│                                         │
│  📞 고객지원                             │
│  ┌─────────────────────────────────┐   │
│  │  [문의하기]              [>]     │   │
│  │  [자주 묻는 질문 (FAQ)]   [>]     │   │
│  │  [공지사항]              [>]     │   │
│  │  [앱 버전 정보]           [>]     │   │
│  └─────────────────────────────────┘   │
│                                         │
│  📄 약관 및 정책                         │
│  ┌─────────────────────────────────┐   │
│  │  [이용약관]              [>]     │   │
│  │  [개인정보 처리방침]      [>]     │   │
│  │  [위치정보 처리방침]      [>]     │   │
│  │  [청소년 보호정책]        [>]     │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ⚠️ 계정 관리                            │
│  ┌─────────────────────────────────┐   │
│  │  [로그아웃]              [>]     │   │
│  └─────────────────────────────────┘   │
│                                         │
├─────────────────────────────────────────┤
│  앱 버전: 1.0.0                         │
└─────────────────────────────────────────┘
```

---

## 🔧 설정 항목 상세

### 1. 👤 계정 설정

#### 1.1 개인정보 수정
- **기능**: 사용자 프로필 정보 수정
- **항목**:
  - 이름
  - 프로필 사진
  - 이메일 (변경 시 재인증 필요)
- **진입**: 프로필 수정 화면으로 이동 (이미 구현됨)
- **권한**: 본인만 수정 가능

#### 1.2 비밀번호 변경
- **기능**: 계정 비밀번호 변경
- **진입**: 비밀번호 변경 팝업 열기 (이미 구현됨)
- **필수 항목**:
  - 현재 비밀번호
  - 새 비밀번호
  - 새 비밀번호 확인
- **유효성 검사**: 최소 6자 이상, 영문/숫자 조합 권장

#### 1.3 회원 탈퇴
- **기능**: 계정 영구 삭제
- **진입**: 회원 탈퇴 확인 화면으로 이동
- **확인 사항**:
  - 회원 탈퇴 시 모든 데이터 삭제 안내
  - 추모관, 댓글, 기도 요청 등 모든 데이터 영구 삭제
  - 복구 불가능 안내
  - 비밀번호 재입력 요구
- **처리**:
  - 소프트 삭제: 30일 후 영구 삭제
  - 30일 이내 로그인 시 복구 가능
  - 관련 데이터는 개인정보 처리방침에 따라 처리

---

### 2. 🔔 알림 설정

#### 2.1 알림 설정
- **기능**: 전역 알림 설정 관리
- **진입**: 알림 설정 화면으로 이동 (이미 구현됨)
- **설정 항목**:
  - 기념일 알림 ON/OFF
  - 댓글 알림 ON/OFF
  - 기도 알림 ON/OFF
  - 추모금 알림 ON/OFF
  - 재활성화 알림 ON/OFF
  - 영원한 시간 알림 ON/OFF
  - 홈 화면 공개 제안 알림 ON/OFF
- **참고**: 추모관별 알림 설정은 추모관 상세 화면에서 관리

#### 2.2 알림 수신 시간
- **기능**: 알림 수신 가능 시간대 설정
- **설정 항목**:
  - 알림 수신 시작 시간 (기본: 09:00)
  - 알림 수신 종료 시간 (기본: 22:00)
  - 기념일 알림은 시간 제한 없음 (고정 시간 발송)
- **표시**: "09:00 ~ 22:00" 형태로 표시

---

### 3. 🔒 프라이버시 설정

#### 3.1 프로필 공개 설정
- **기능**: 프로필 정보 공개 범위 설정
- **옵션**:
  - 전체 공개: 모든 사용자가 프로필 조회 가능
  - 추모관 생성자만: 추모관을 만든 사용자만 조회 가능
  - 비공개: 프로필 정보 숨김
- **영향**: 검색 시 프로필 노출 여부 결정

#### 3.2 추모관 기본 공개 설정
- **기능**: 새로 생성하는 추모관의 기본 공개/비공개 설정
- **옵션**:
  - 공개 (기본값)
  - 비공개
- **참고**: 추모관 생성 시 이 설정이 기본값으로 적용되며, 개별적으로 변경 가능

#### 3.3 검색 허용 설정
- **기능**: 추모관 검색에서 나의 추모관이 노출되는지 설정
- **옵션**:
  - 검색 허용 (기본값)
  - 검색 제외: 공개 추모관이어도 검색 결과에서 제외
- **영향**: 공개 추모관 검색 화면에서 노출 여부 결정

---

### 4. 💾 데이터 관리

#### 4.1 캐시 삭제
- **기능**: 앱 캐시 데이터 삭제
- **삭제 항목**:
  - 이미지 캐시
  - 임시 파일
  - 다운로드 파일 (선택 가능)
- **확인**: 캐시 삭제 확인 다이얼로그
- **효과**: 앱 용량 절감, 로딩 속도 개선 가능

#### 4.2 백업/동기화
- **기능**: 추모관 데이터 클라우드 백업 및 동기화
- **백업 항목**:
  - 추모관 정보
  - 사진 (원본)
  - 동영상 링크
  - 편지 (텍스트/음성)
  - 댓글
- **동기화**: 여러 기기 간 데이터 동기화
- **주기**: 자동 백업 (매일 자정) 또는 수동 백업
- **저장소**: Firebase Storage 또는 iCloud/Google Drive

#### 4.3 데이터 내보내기
- **기능**: 추모관 데이터를 파일로 내보내기
- **형식**:
  - PDF: 추모관 전체 내용을 PDF로 저장
  - ZIP: 사진, 영상, 편지 등 모든 파일 포함
  - JSON: 전체 데이터 구조
- **용도**: 개인 보관, 다른 서비스로 이전 등

---

### 5. 🎨 앱 설정

#### 5.1 언어 설정
- **기능**: 앱 표시 언어 변경
- **옵션**:
  - 한국어 (기본값)
  - 영어
  - 일본어 (추후 추가)
  - 중국어 (추후 추가)
- **적용**: 즉시 반영, 앱 재시작 불필요

#### 5.2 폰트 크기
- **기능**: 앱 전체 텍스트 크기 조정
- **옵션**:
  - 작게
  - 기본
  - 크게
  - 매우 크게
- **적용**: 즉시 반영, 시각적 미리보기 제공

#### 5.3 앱 테마
- **기능**: 앱 색상 테마 설정
- **옵션**:
  - 따뜻한 톤 (기본값): 베이지, 크림 계열
  - 부드러운 톤: 파스텔 계열
  - 고요한 톤: 차분한 회색 계열
- **참고**: 추모 앱의 특성상 다크 모드는 제공하지 않음 (무거운 분위기)

---

### 6. 💳 결제 및 구독

#### 6.1 프리미엄 구독 관리
- **기능**: 프리미엄 구독 상태 및 관리
- **정보 표시**:
  - 현재 구독 상태 (무료/프리미엄)
  - 구독 만료일
  - 구독 플랜 (월간/연간)
- **기능**:
  - 구독 갱신
  - 구독 취소
  - 구독 변경 (월간 ↔ 연간)
- **진입**: 프리미엄 구독 화면으로 이동

#### 6.2 결제 내역
- **기능**: 결제 및 구독 내역 조회
- **표시 항목**:
  - 결제일
  - 결제 금액
  - 결제 항목 (프리미엄 구독, 추모금 전달 등)
  - 결제 상태 (완료/취소/환불)
- **기간**: 전체, 최근 1개월, 3개월, 6개월, 1년
- **다운로드**: 영수증 PDF 다운로드

#### 6.3 아이템 구매 내역
- **기능**: 디지털 헌화 아이템 구매 내역 조회
- **표시 항목**:
  - 구매일
  - 아이템 이름
  - 구매 금액
  - 적용된 추모관
- **기능**: 구매한 아이템 재다운로드

---

### 7. 📞 고객지원

#### 7.1 문의하기
- **기능**: 고객지원 문의
- **문의 유형**:
  - 기능 문의
  - 버그 신고
  - 제안 및 피드백
  - 기타
- **입력 항목**:
  - 제목
  - 내용
  - 첨부 파일 (선택)
  - 연락처 (선택)
- **처리**: 이메일 또는 인앱 문의 시스템

#### 7.2 자주 묻는 질문 (FAQ)
- **기능**: 자주 묻는 질문 및 답변 조회
- **카테고리**:
  - 계정 관리
  - 추모관 관리
  - 결제 및 구독
  - 알림 설정
  - 기술 지원
- **검색**: 키워드로 FAQ 검색 가능

#### 7.3 공지사항
- **기능**: 앱 공지사항 조회
- **표시 항목**:
  - 제목
  - 작성일
  - 중요도 (일반/중요/긴급)
- **기능**: 읽음/안 읽음 표시, 푸시 알림 설정

#### 7.4 앱 버전 정보
- **기능**: 앱 버전 정보 표시
- **정보**:
  - 현재 버전 (예: 1.0.0)
  - 최신 버전 여부
  - 업데이트 일정
- **기능**: 수동 업데이트 확인, 업데이트 다운로드

---

### 8. 📄 약관 및 정책

#### 8.1 이용약관
- **기능**: 서비스 이용약관 조회
- **내용**: 서비스 이용 조건 및 규칙
- **표시**: 웹뷰 또는 인앱 텍스트

#### 8.2 개인정보 처리방침
- **기능**: 개인정보 처리방침 조회
- **내용**: 개인정보 수집 및 이용 목적, 보관 기간 등
- **표시**: 웹뷰 또는 인앱 텍스트

#### 8.3 위치정보 처리방침
- **기능**: 위치정보 처리방침 조회
- **내용**: 위치정보 수집 및 이용 목적 (해당 시)
- **표시**: 웹뷰 또는 인앱 텍스트

#### 8.4 청소년 보호정책
- **기능**: 청소년 보호정책 조회
- **내용**: 청소년 보호를 위한 정책 및 조치
- **표시**: 웹뷰 또는 인앱 텍스트

---

### 9. ⚠️ 계정 관리

#### 9.1 로그아웃
- **기능**: 계정 로그아웃
- **확인**: 로그아웃 확인 다이얼로그
- **처리**: 로그인 화면으로 이동
- **참고**: 로컬 데이터는 유지되며, 로그인 시 다시 로드

---

## 🎨 UI/UX 디자인

### 색상
- **배경**: 따뜻한 크림 색상 (`#FFF8F0`)
- **카드 배경**: 흰색 또는 베이지 (`#F5F1E8`)
- **텍스트**: 따뜻한 브라운 (`#8B7355`)
- **구분선**: 연한 브라운 (`#8B7355` with 0.2 opacity)

### 레이아웃
- **섹션 간격**: 24px
- **카드 패딩**: 16px
- **리스트 아이템 높이**: 최소 56px
- **아이콘 크기**: 24px
- **화살표 아이콘**: 오른쪽 정렬

### 인터랙션
- **탭 반응**: 부드러운 애니메이션
- **설정 변경**: 즉시 저장 (명시적 저장 버튼 없는 항목)
- **확인 다이얼로그**: 중요 작업 시 확인 요구

---

## 📱 반응형 레이아웃

### 작은 화면 (320px ~ 375px)
- **섹션 제목**: 16px, 최대 1줄
- **리스트 아이템**: 최소 높이 56px, 패딩 12px
- **텍스트**: 14px, 최대 1줄, `TextOverflow.ellipsis`
- **아이콘**: 20px

### 중간 화면 (375px ~ 414px)
- **리스트 아이템**: 패딩 16px
- **텍스트**: 15px

### 큰 화면 (414px+)
- **최대 너비**: 600px, 중앙 정렬
- **리스트 아이템**: 패딩 20px

---

## 🔄 화면 이동 플로우

```
설정 화면
  ├─ 개인정보 수정 → 프로필 수정 화면
  ├─ 비밀번호 변경 → 비밀번호 변경 팝업
  ├─ 회원 탈퇴 → 회원 탈퇴 확인 화면
  ├─ 알림 설정 → 알림 설정 화면
  ├─ 알림 수신 시간 → 알림 시간 설정 팝업
  ├─ 프로필 공개 설정 → 프로필 공개 설정 팝업
  ├─ 추모관 기본 공개 설정 → 추모관 기본 공개 설정 팝업
  ├─ 검색 허용 설정 → 검색 허용 설정 팝업
  ├─ 캐시 삭제 → 캐시 삭제 확인 팝업
  ├─ 백업/동기화 → 백업/동기화 화면
  ├─ 데이터 내보내기 → 데이터 내보내기 화면
  ├─ 언어 설정 → 언어 선택 팝업
  ├─ 폰트 크기 → 폰트 크기 선택 팝업
  ├─ 앱 테마 → 앱 테마 선택 팝업
  ├─ 프리미엄 구독 관리 → 프리미엄 구독 화면
  ├─ 결제 내역 → 결제 내역 화면
  ├─ 아이템 구매 내역 → 아이템 구매 내역 화면
  ├─ 문의하기 → 문의하기 화면
  ├─ FAQ → FAQ 화면
  ├─ 공지사항 → 공지사항 화면
  ├─ 앱 버전 정보 → 앱 버전 정보 화면
  ├─ 이용약관 → 약관 조회 화면 (웹뷰)
  ├─ 개인정보 처리방침 → 약관 조회 화면 (웹뷰)
  ├─ 위치정보 처리방침 → 약관 조회 화면 (웹뷰)
  ├─ 청소년 보호정책 → 약관 조회 화면 (웹뷰)
  └─ 로그아웃 → 로그아웃 확인 팝업 → 로그인 화면
```

---

## 📝 구현 우선순위

### Phase 1: 필수 기능 (1차 출시)
1. ✅ 계정 설정
   - 개인정보 수정 (이미 구현)
   - 비밀번호 변경 (이미 구현)
   - 회원 탈퇴

2. ✅ 알림 설정
   - 알림 설정 (이미 구현)
   - 알림 수신 시간

3. ✅ 계정 관리
   - 로그아웃 (이미 구현)

### Phase 2: 중요 기능 (2차 업데이트)
4. 프라이버시 설정
   - 프로필 공개 설정
   - 추모관 기본 공개 설정
   - 검색 허용 설정

5. 데이터 관리
   - 캐시 삭제
   - 백업/동기화
   - 데이터 내보내기

6. 고객지원
   - 문의하기
   - FAQ
   - 공지사항

### Phase 3: 추가 기능 (3차 업데이트)
7. 앱 설정
   - 언어 설정
   - 폰트 크기
   - 앱 테마

8. 결제 및 구독
   - 프리미엄 구독 관리
   - 결제 내역
   - 아이템 구매 내역

9. 약관 및 정책
   - 이용약관
   - 개인정보 처리방침
   - 위치정보 처리방침
   - 청소년 보호정책

---

## 🔐 보안 및 권한

### 회원 탈퇴
- 비밀번호 재입력 필수
- 30일 유예 기간 제공
- 관련 데이터 소프트 삭제 후 영구 삭제

### 데이터 내보내기
- 개인정보 암호화
- 다운로드 링크 유효기간 제한 (7일)
- 다운로드 기록 저장

### 캐시 삭제
- 중요 데이터는 삭제하지 않음
- 사용자 확인 필수

---

## 📊 데이터 구조

### 설정 데이터 (Firestore: `users/{userId}`)
```javascript
{
  // ... 기존 사용자 데이터 ...
  
  // 프라이버시 설정
  privacySettings: {
    profileVisibility: 'public' | 'memorial_creators' | 'private',
    defaultMemorialVisibility: 'public' | 'private',
    searchable: true | false,
  },
  
  // 앱 설정
  appSettings: {
    language: 'ko' | 'en' | 'ja' | 'zh',
    fontSize: 'small' | 'normal' | 'large' | 'extra_large',
    theme: 'warm' | 'soft' | 'calm',
  },
  
  // 데이터 관리
  dataManagement: {
    lastBackupAt: timestamp,
    autoBackup: true | false,
    backupFrequency: 'daily' | 'weekly' | 'monthly',
  },
}
```

---

## 🎯 다음 단계

1. 설정 화면 UI 구현
2. 각 설정 항목별 화면/팝업 구현
3. 설정 데이터 Firestore 연동
4. 설정 변경 시 실시간 반영
5. 테스트 및 검증

